<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Encuesta - SIRO</title>

  <link rel="icon" href="./logo-siro.png" />

  <style>
    :root{
      --green: #066937;
      --yellow: #F3AC33;
      --light: #EFF1F0;
      --text: #0b2b20;
      --card-radius: 12px;
    }
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:var(--light);
      color:var(--text);
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:18px;
      box-sizing:border-box;
      -webkit-font-smoothing:antialiased;
    }
    .wrap{width:100%;max-width:720px;margin:18px auto 80px}
    .card{
      background:#fff;
      border-radius:var(--card-radius);
      box-shadow:0 8px 24px rgba(6,105,55,0.06);
      padding:20px;
      box-sizing:border-box;
      border:1px solid rgba(6,105,55,0.06);
      transition: all 0.6s ease;
      overflow:hidden;
      animation: fadeInUp 0.8s ease both;
    }
    @keyframes fadeInUp {
      from {opacity:0; transform: translateY(20px);}
      to {opacity:1; transform: translateY(0);}
    }
    .hdr{display:flex;gap:12px;align-items:center;margin-bottom:16px}
    .logo{
      width:56px;height:56px;border-radius:8px;background:#fff;
      display:flex;align-items:center;justify-content:center;overflow:hidden;
      flex-shrink:0;
    }
    .logo img{width:100%;height:100%;object-fit:contain;display:block}
    .subtitle{font-size:13px;margin:0;color:#2f3f36}
    h1{font-size:18px;margin:6px 0 8px}
    p.lead{font-size:13px;margin:0 0 16px;color:#425148}

    /* Preguntas */
    .question-block{
      margin-top:28px; /* espacio entre bloques */
      animation: fadeInUp 0.9s ease both;
    }

    label{display:block;font-size:14px;color:#24332a}
    .radio-row{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .radio-btn{
      display:flex;gap:10px;align-items:center;padding:12px;
      border-radius:10px;border:1px solid #d6e1dc;background:#fafafa;cursor:pointer;
      transition: all 0.25s ease;
    }
    .radio-btn:hover{
      background:#fff;
      box-shadow:0 4px 10px rgba(0,0,0,0.08);
      transform:translateY(-2px);
    }
    .radio-btn input[type="radio"]{
      accent-color: var(--green);
      transform:scale(1.2);
      cursor:pointer;
    }

    /* Inputs de texto */
    .field{width:100%;padding:10px;border-radius:10px;border:1px solid #e7ebe8;
      margin-top:8px;box-sizing:border-box;background:#fff;transition:border 0.2s ease}
    .field:focus{border:1px solid var(--green);outline:none;box-shadow:0 0 0 2px rgba(6,105,55,0.2)}

    /* Bot√≥n */
    .btn{
      display:inline-block;width:100%;text-align:center;padding:12px 14px;border-radius:10px;
      border:0;background:var(--green);color:#fff;font-weight:600;margin-top:24px;cursor:pointer;
      font-size:15px;transition: background 0.3s, transform 0.2s;
    }
    .btn:hover{background:#05582b; transform:scale(1.02)}
    .muted{font-size:12px;color:#6a736c;margin-top:10px}
    #msg{margin-top:14px;font-size:14px}

    /* Estado de gracias */
    .card.success{
      background: var(--green);
      color: #fff;
      text-align:center;
      padding:40px 20px;
      animation: popIn 0.6s ease both;

      /* üëá Esto centra el card en la p√°gina */
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 600px;
      border-radius: var(--card-radius);
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }
    @keyframes popIn {
      from {opacity:0; transform:scale(0.8);}
      to {opacity:1; transform:scale(1);}
    }
    .card.success .logo-success{
      /* width:80px;
      height:80px;
      margin:0 auto 16px; */
      animation: bounce 1s ease infinite alternate;
      width:120px;
      height:auto;
      margin:0 auto 16px;
    }
    @keyframes bounce {
      from {transform: translateY(0);}
      to {transform: translateY(-6px);}
    }
    .card.success .logo-success img{
      width:100%;
      height:auto;
      object-fit:contain;
      display:block;
    }
    .card.success h2{font-size:22px;margin:0 0 8px;}
    .card.success p{margin:0;font-size:15px;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-labelledby="pageTitle" id="cardBox">
      <div class="hdr">
        <div class="logo" aria-hidden="true">
          <img src="./logo-siro.png" alt="SIRO logo"/>
        </div>
        <div><div class="subtitle">VCY ¬∑ Encuesta r√°pida</div></div>
      </div>

      <h1 id="pageTitle">2 minutos ‚Äî Contanos sobre tu cobranza</h1>
      <p class="lead">Respond√© las 3 preguntas y dej√° tus datos. Solo recopilamos info para contacto y an√°lisis.</p>

      <form id="leadForm" autocomplete="off">
        <!-- P1 -->
        <div class="question-block">
          <label>1- ¬øCon qu√© frase describir√≠as el estado de tu cobranza hoy?</label>
          <div class="radio-row">
            <label class="radio-btn"><input type="radio" name="q1" value="Todo bajo control" required/> <span>Todo bajo control</span></label>
            <label class="radio-btn"><input type="radio" name="q1" value="Apago incendio todos los meses" required/> <span>Apago incendio todos los meses</span></label>
            <label class="radio-btn"><input type="radio" name="q1" value="S√°lvese quien pueda" required/> <span>S√°lvese quien pueda</span></label>
            <label class="radio-btn"><input type="radio" name="q1" value="Tenemos todo automatizado" required/> <span>Tenemos todo automatizado</span></label>
          </div>
        </div>

        <!-- P2 -->
        <div class="question-block">
          <label>2- Si la cobranza fuera un deporte en tu colegio, ser√≠a‚Ä¶</label>
          <div class="radio-row">
            <label class="radio-btn"><input type="radio" name="q2" value="Marat√≥n" required/> <span>Marat√≥n (larga y agotadora)</span></label>
            <label class="radio-btn"><input type="radio" name="q2" value="Boxeo" required/> <span>Boxeo (todos los meses peleando)</span></label>
            <label class="radio-btn"><input type="radio" name="q2" value="Yoga" required/> <span>Yoga (tranquila y en paz)</span></label>
            <label class="radio-btn"><input type="radio" name="q2" value="F√≥rmula 1" required/> <span>F√≥rmula 1 (r√°pida y con mucha tecnolog√≠a)</span></label>
          </div>
        </div>

        <!-- P3 -->
        <div class="question-block">
          <label>3- ¬øC√≥mo se comportan los padres de tu colegio al pagar?</label>
          <div class="radio-row">
            <label class="radio-btn"><input type="radio" name="q3" value="Puntuales" required/> <span>Puntuales como reloj suizo</span></label>
            <label class="radio-btn"><input type="radio" name="q3" value="Distra√≠dos" required/> <span>Se hacen los distra√≠dos</span></label>
            <label class="radio-btn"><input type="radio" name="q3" value="Siempre tarde" required/> <span>Pagan, pero siempre tarde</span></label>
            <label class="radio-btn"><input type="radio" name="q3" value="Con alternativas" required/> <span>Pagan f√°cil porque tienen alternativas</span></label>
          </div>
        </div>

        <!-- DATOS -->
        <div class="question-block">
          <label>Nombre y Apellido</label>
          <input class="field" name="fullname" type="text" placeholder="Ej: Mar√≠a P√©rez" required />
        </div>

        <div class="question-block">
          <label>Instituci√≥n que representa</label>
          <input class="field" name="institution" type="text" placeholder="Nombre del colegio / instituci√≥n" required />
        </div>

        <div class="question-block">
          <label>Tel√©fono</label>
          <input class="field" name="phone" type="tel" inputmode="numeric" pattern="[0-9]+" placeholder="Solo n√∫meros" />
        </div>

        <input type="hidden" name="campaign" value="standA" />
        <button id="submitBtn" class="btn" type="submit">Enviar</button>
        <div id="msg" class="muted" role="status" aria-live="polite"></div>
      </form>
    </div>
  </div>

  <script>
    const ENDPOINT = "https://prod-08.brazilsouth.logic.azure.com/workflows/fdc421922b074f4689709fb7f59f3fba/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=Xl30kx4vfUwUi877MOaMTh5p4FqEXZIDjTI0tlPR0ZI"; // cambia aqu√≠
    const form = document.getElementById('leadForm');
    const msg = document.getElementById('msg');
    const btn = document.getElementById('submitBtn');
    const card = document.getElementById('cardBox');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      btn.disabled = true;
      msg.textContent = 'Enviando...';

      const dataToSend = Object.fromEntries(new FormData(form).entries());
      if(!dataToSend.phone) dataToSend.phone = "";

      try {
        const res = await fetch(ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dataToSend)
        });
        if(res.ok){
          card.classList.add("success");
          card.innerHTML = `
            <div class="logo-success">
              <img src="./logo-siro-gracias.png" alt="Logo √©xito"/>
            </div>
            <h2>¬°Gracias ${dataToSend.fullname}!</h2>
            <p>Tus respuestas fueron guardadas correctamente.</p>
          `;
        }else{
          msg.textContent = 'Error al enviar. Intent√° de nuevo.';
        }
      } catch (err){
        msg.textContent = 'Error de red.';
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
